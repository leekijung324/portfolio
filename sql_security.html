<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case Study: SQL Analysis for Security Solutions | Ki Jung Lee, PhD</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Copied styles from other case studies -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .case-study-content h2 {
            font-size: 1.5rem; /* 2xl */
            font-weight: 700; /* bold */
            color: #1f2937; /* text-gray-800 */
            margin-top: 3rem; /* mt-12 */
            margin-bottom: 1rem; /* mb-4 */
        }
        .case-study-content h3 {
            font-size: 1.25rem; /* xl */
            font-weight: 600; /* semibold */
            color: #1f2937; /* text-gray-800 */
            margin-top: 2rem; /* mt-8 */
            margin-bottom: 0.75rem; /* mb-3 */
        }
        .case-study-content p {
            font-size: 1.125rem; /* lg */
            color: #374151; /* text-gray-700 */
            margin-bottom: 1.5rem; /* mb-6 */
            line-height: 1.75; /* leading-relaxed */
        }
        .case-study-content ul {
            list-style-type: disc;
            list-style-position: outside;
            font-size: 1.125rem; /* lg */
            color: #374151; /* text-gray-700 */
            margin-bottom: 1.5rem; /* mb-6 */
            padding-left: 1.5rem; /* pl-6 */
        }
        .case-study-content ul li + li {
             margin-top: 0.5rem; /* space-y-2 */
        }
        .case-study-content pre {
            background-color: #e5e7eb; /* bg-gray-200 */
            color: #1f2937; /* text-gray-800 */
            padding: 1rem; /* p-4 */
            border-radius: 0.5rem; /* rounded-lg */
            overflow-x: auto;
            margin-bottom: 1.5rem; /* mb-6 */
            font-size: 0.875rem; /* text-sm */
            line-height: 1.25rem;
            border: 1px solid #d1d5db; /* border border-gray-300 */
        }
        .case-study-content code {
            font-family: 'Menlo', 'Monaco', 'Consolas', 'Courier New', monospace;
        }
        /* Table styling for query results */
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
            font-size: 0.875rem;
            overflow-x: auto;
            display: block;
        }
        .result-table th, .result-table td {
            border: 1px solid #d1d5db;
            padding: 0.5rem;
            text-align: left;
        }
        .result-table th {
            background-color: #f3f4f6;
            font-weight: 600;
        }
        .result-table tr:nth-child(even) {
            background-color: #f9fafb;
        }
    </style>
</head>

<body id="top" class="bg-gray-50 text-gray-700">

    <!-- Header & Navigation --><header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="home.html#top" class="text-xl font-bold text-gray-800">Ki Jung Lee, PhD</a>
            <div class="hidden md:flex items-center space-x-8">
                <a href="home.html#about" class="text-gray-600 hover:text-blue-600">About</a>
                <a href="home.html#ux-portfolio" class="text-gray-600 hover:text-blue-600">UX Research</a>
                <a href="home.html#ds-portfolio" class="text-gray-600 hover:text-blue-600">Data Science</a>
                <a href="home.html#publications" class="text-gray-600 hover:text-blue-600">Publications</a>
                <a href="home.html#contact" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">Contact</a>
            </div>
             <button id="mobile-menu-button" class="md:hidden text-gray-700 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <!-- Mobile Menu --><div id="mobile-menu" class="hidden md:hidden px-6 pt-2 pb-4">
            <a href="home.html#about" class="block py-2 text-gray-600 hover:text-blue-600">About</a>
            <a href="home.html#ux-portfolio" class="block py-2 text-gray-600 hover:text-blue-600">UX Research</a>
            <a href="home.html#ds-portfolio" class="block py-2 text-gray-600 hover:text-blue-600">Data Science</a>
            <a href="home.html#publications" class="block py-2 text-gray-600 hover:text-blue-600">Publications</a>
            <a href="home.html#contact" class="block mt-2 text-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">Contact</a>
        </div>
    </header>

    <!-- Case Study Main Content --><main class="container mx-auto px-6 py-12">
        <div class="max-w-5xl mx-auto">
            <div class="mb-8">
                <a href="home.html#ds-portfolio" class="font-semibold text-blue-600 hover:text-blue-700 transition-colors duration-300">&larr; Back to Portfolio</a>
            </div>

            <!-- New wrapper for homepage aesthetic -->
            <div class="bg-white shadow-xl rounded-lg p-8 md:p-12">
                <article class="case-study-content">
                    <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-4 leading-tight">
                        SQL Analysis for Security Solutions: Fraud Detection & Risk Scoring
                    </h1>
                    <p class="text-xl text-gray-600 mb-8">
                        <strong>Ki Jung Lee</strong>
                    </p>

                    <h2>Executive Summary</h2>
                    <p>
                        This case study demonstrates the application of advanced SQL techniques to solve critical data science problems in the security domain. By analyzing a complex relational database containing transaction, customer, merchant, and alert data, this project identifies high-risk patterns, evaluates the effectiveness of existing alert systems, and develops a comprehensive dynamic risk scoring model. The analysis provides actionable business recommendations for fraud prevention, customer monitoring, and merchant risk management.
                    </p>

                    <h2>1. Data Architecture</h2>
                    <p>
                        The analysis was performed on a relational database designed to simulate a financial security environment. The schema consists of four primary tables:
                    </p>
                    <ul>
                        <li><strong>TRANSACTIONS (2,000 records):</strong> Granular transaction data including amounts, timestamps, location, and fraud labels.</li>
                        <li><strong>CUSTOMERS (300 records):</strong> User profiles with demographic data, credit scores, and static risk categories.</li>
                        <li><strong>MERCHANTS (50 records):</strong> Business profiles including categories and assigned risk levels.</li>
                        <li><strong>ALERTS (500 records):</strong> System-generated security alerts linked to specific customers and events.</li>
                    </ul>

                    <h2>2. Exploratory Data Analysis & Business Metrics</h2>
                    <p>
                        The first phase involved establishing a baseline for business performance and risk exposure.
                    </p>
                    
                    <h3>Global Fraud Metrics</h3>
                    <p>We aggregated transaction data to quantify total financial exposure and fraud rates.</p>
<pre><code>SELECT
    COUNT(*) as total_transactions,
    SUM(is_fraud) as fraud_transactions,
    ROUND(AVG(is_fraud) * 100, 2) as fraud_rate_percent,
    ROUND(SUM(amount), 2) as total_volume,
    ROUND(SUM(CASE WHEN is_fraud = 1 THEN amount ELSE 0 END), 2) as fraud_loss_amount
FROM transactions;</code></pre>
                    <div class="overflow-x-auto">
                        <table class="result-table">
                            <thead><tr><th>total_transactions</th><th>fraud_transactions</th><th>fraud_rate_percent</th><th>total_volume</th><th>fraud_loss_amount</th></tr></thead>
                            <tbody><tr><td>2000</td><td>107</td><td>5.35</td><td>612090.82</td><td>113833.98</td></tr></tbody>
                        </table>
                    </div>

                    <h3>Customer Risk Distribution</h3>
                    <p>Understanding the composition of the customer base allows for prioritized monitoring resources.</p>
<pre><code>SELECT
    risk_category,
    COUNT(*) as customer_count,
    ROUND(AVG(age), 1) as avg_age,
    ROUND(AVG(credit_score), 0) as avg_credit_score,
    ROUND(AVG(annual_income), 0) as avg_income
FROM customers
GROUP BY risk_category
ORDER BY 
    CASE risk_category 
        WHEN 'HIGH' THEN 1 
        WHEN 'MEDIUM' THEN 2 
        ELSE 3 
    END;</code></pre>
                    <div class="overflow-x-auto">
                        <table class="result-table">
                            <thead><tr><th>risk_category</th><th>customer_count</th><th>avg_age</th><th>avg_credit_score</th><th>avg_income</th></tr></thead>
                            <tbody>
                                <tr><td>HIGH</td><td>19</td><td>39.3</td><td>539.0</td><td>83694.0</td></tr>
                                <tr><td>MEDIUM</td><td>68</td><td>44.8</td><td>582.0</td><td>61716.0</td></tr>
                                <tr><td>LOW</td><td>213</td><td>43.4</td><td>720.0</td><td>70487.0</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <h2>3. Fraud Pattern Recognition</h2>
                    <p>
                        We utilized multi-dimensional analysis to uncover specific scenarios where fraud is most prevalent.
                    </p>

                    <h3>International Risk by Time of Day</h3>
                    <p>Fraud investigators often target specific combinations of location and time. The analysis revealed that international transactions occurring at night carry a 100% fraud rate in this dataset, a critical signal for automated blocking rules.</p>
<pre><code>SELECT
    location,
    CASE
        WHEN hour_of_day BETWEEN 0 AND 5 THEN 'Night (0-5)'
        WHEN hour_of_day BETWEEN 6 AND 11 THEN 'Morning (6-11)'
        WHEN hour_of_day BETWEEN 12 AND 17 THEN 'Afternoon (12-17)'
        ELSE 'Evening (18-23)'
    END as time_period,
    COUNT(*) as transaction_count,
    SUM(is_fraud) as fraud_count,
    ROUND(AVG(is_fraud) * 100, 2) as fraud_rate_percent
FROM transactions
GROUP BY location, time_period
ORDER BY fraud_rate_percent DESC;</code></pre>
                    <div class="overflow-x-auto">
                        <table class="result-table">
                            <thead><tr><th>location</th><th>time_period</th><th>transaction_count</th><th>fraud_rate_percent</th></tr></thead>
                            <tbody>
                                <tr><td>international</td><td>Night (0-5)</td><td>56</td><td>100.00</td></tr>
                                <tr><td>international</td><td>Evening (18-23)</td><td>58</td><td>22.41</td></tr>
                                <tr><td>international</td><td>Afternoon (12-17)</td><td>68</td><td>11.76</td></tr>
                                <tr><td>domestic</td><td>Night (0-5)</td><td>445</td><td>5.17</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <h2>4. Advanced Customer Risk Profiling</h2>
                    <p>
                        Effective risk management requires a 360-degree view of the customer. We constructed a complex query using Common Table Expressions (CTEs) to aggregate behavioral anomalies—such as international activity, unusual timing, and high transaction values—and joined this with static customer profiles.
                    </p>
<pre><code>WITH customer_transaction_summary AS (
    SELECT
        t.customer_id,
        COUNT(*) as transaction_count,
        MAX(t.amount) as max_transaction,
        SUM(CASE WHEN t.location = 'international' THEN 1 ELSE 0 END) as intl_transactions,
        SUM(CASE WHEN t.hour_of_day < 6 OR t.hour_of_day > 22 THEN 1 ELSE 0 END) as unusual_time_transactions,
        SUM(t.is_fraud) as fraud_transactions
    FROM transactions t
    GROUP BY t.customer_id
)
SELECT
    cts.customer_id,
    c.risk_category,
    cts.intl_transactions,
    cts.unusual_time_transactions,
    cts.fraud_transactions
FROM customer_transaction_summary cts
JOIN customers c ON cts.customer_id = c.customer_id
WHERE (c.risk_category = 'HIGH' AND cts.intl_transactions > 0)
   OR (cts.fraud_transactions > 0)
ORDER BY cts.fraud_transactions DESC
LIMIT 5;</code></pre>
                    <div class="overflow-x-auto">
                        <table class="result-table">
                            <thead><tr><th>customer_id</th><th>risk_category</th><th>intl_transactions</th><th>unusual_time_transactions</th><th>fraud_transactions</th></tr></thead>
                            <tbody>
                                <tr><td>CUST_0096</td><td>LOW</td><td>10</td><td>4</td><td>6</td></tr>
                                <tr><td>CUST_0300</td><td>LOW</td><td>15</td><td>12</td><td>5</td></tr>
                                <tr><td>CUST_0083</td><td>MEDIUM</td><td>4</td><td>2</td><td>4</td></tr>
                                <tr><td>CUST_0258</td><td>LOW</td><td>8</td><td>4</td><td>4</td></tr>
                                <tr><td>CUST_0164</td><td>LOW</td><td>3</td><td>4</td><td>3</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <h2>5. Alert System Optimization</h2>
                    <p>
                        Alerts are only valuable if they lead to action. We analyzed alert resolution metrics to identify which alert types generate the most noise (false positives) versus valuable signals.
                    </p>
<pre><code>SELECT
    alert_type,
    severity,
    COUNT(*) as total_alerts,
    SUM(CASE WHEN status = 'RESOLVED' THEN 1 ELSE 0 END) as resolved_alerts,
    SUM(CASE WHEN status = 'FALSE_POSITIVE' THEN 1 ELSE 0 END) as false_positives,
    ROUND(AVG(resolution_time_hours), 1) as avg_resolution_hours
FROM alerts
GROUP BY alert_type, severity
ORDER BY total_alerts DESC
LIMIT 5;</code></pre>
                    <div class="overflow-x-auto">
                        <table class="result-table">
                            <thead><tr><th>alert_type</th><th>severity</th><th>total_alerts</th><th>resolved_alerts</th><th>false_positives</th><th>avg_resolution</th></tr></thead>
                            <tbody>
                                <tr><td>UNUSUAL_SPENDING</td><td>MEDIUM</td><td>39</td><td>21</td><td>9</td><td>19.7</td></tr>
                                <tr><td>VELOCITY_CHECK</td><td>MEDIUM</td><td>39</td><td>27</td><td>2</td><td>16.3</td></tr>
                                <tr><td>AMOUNT_THRESHOLD</td><td>LOW</td><td>35</td><td>19</td><td>6</td><td>21.8</td></tr>
                                <tr><td>LOCATION_ANOMALY</td><td>MEDIUM</td><td>31</td><td>19</td><td>2</td><td>26.2</td></tr>
                                <tr><td>UNUSUAL_SPENDING</td><td>LOW</td><td>30</td><td>22</td><td>3</td><td>21.1</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <h2>6. Strategic Risk Scoring Model</h2>
                    <p>
                        The culmination of this study was the development of a comprehensive "Dynamic Risk Score." This SQL query integrates static profile data, transactional behavior, and alert history into a single weighted score to automate risk classification.
                    </p>
<pre><code>WITH customer_comprehensive_risk AS (
    SELECT
        c.customer_id,
        -- Calculate dynamic risk score based on weighted factors
        (CASE WHEN c.credit_score < 600 THEN 30 ELSE 0 END) +
        (CASE WHEN c.employment_status = 'unemployed' THEN 25 ELSE 0 END) +
        (CASE WHEN c.debt_to_income_ratio > 0.5 THEN 20 ELSE 0 END) +
        (CASE WHEN COUNT(t.transaction_id) > 0 AND AVG(t.amount) > 1000 THEN 15 ELSE 0 END) +
        (CASE WHEN SUM(CASE WHEN t.location = 'international' THEN 1 ELSE 0 END) > 5 THEN 20 ELSE 0 END) +
        (CASE WHEN COUNT(a.alert_id) > 3 THEN 25 ELSE 0 END) +
        (CASE WHEN SUM(t.is_fraud) > 0 THEN 50 ELSE 0 END) as dynamic_risk_score
    FROM customers c
    LEFT JOIN transactions t ON c.customer_id = t.customer_id
    LEFT JOIN alerts a ON c.customer_id = a.customer_id
    GROUP BY c.customer_id, c.credit_score, c.employment_status, c.debt_to_income_ratio
)
SELECT
    customer_id,
    dynamic_risk_score,
    CASE
        WHEN dynamic_risk_score >= 80 THEN 'CRITICAL'
        WHEN dynamic_risk_score >= 60 THEN 'HIGH'
        WHEN dynamic_risk_score >= 30 THEN 'MEDIUM'
        ELSE 'LOW'
    END as recommended_risk_level
FROM customer_comprehensive_risk
ORDER BY dynamic_risk_score DESC
LIMIT 5;</code></pre>
                    <div class="overflow-x-auto">
                        <table class="result-table">
                            <thead><tr><th>customer_id</th><th>dynamic_risk_score</th><th>recommended_risk_level</th></tr></thead>
                            <tbody>
                                <tr><td>CUST_0160</td><td>125</td><td>CRITICAL</td></tr>
                                <tr><td>CUST_0263</td><td>120</td><td>CRITICAL</td></tr>
                                <tr><td>CUST_0266</td><td>120</td><td>CRITICAL</td></tr>
                                <tr><td>CUST_0277</td><td>120</td><td>CRITICAL</td></tr>
                                <tr><td>CUST_0001</td><td>105</td><td>CRITICAL</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <h2>7. Conclusion & Recommendations</h2>
                    <p>
                        This SQL-based analysis provided a robust framework for security operations. By translating raw data into actionable metrics, we identified three key strategic recommendations:
                    </p>
                    <ul>
                        <li><strong>Fraud Prevention:</strong> Implement immediate blocking rules for international transactions occurring between 00:00 and 05:00, as this segment showed a 100% fraud rate.</li>
                        <li><strong>Customer Monitoring:</strong> Prioritize manual review for the "Critical" risk segment identified by the dynamic scoring model, particularly customers CUST_0160 and CUST_0263.</li>
                        <li><strong>Alert Optimization:</strong> Refine "Unusual Spending" thresholds, as this category currently produces the highest volume of false positives (23%), wasting analyst time.</li>
                    </ul>
                </article>
            </div>

        </div>
    </main>

    <!-- Footer --><footer class="bg-gray-800 text-white py-6">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 Ki Jung Lee, PhD. All Rights Reserved.</p>
        </div>
    </footer>
    
    <script>
        // Simple mobile menu toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
        
        // Close mobile menu when a link is clicked
        const mobileNavLinks = document.querySelectorAll('#mobile-menu a');
        mobileNavLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        });
    </script>

</body>
</html>